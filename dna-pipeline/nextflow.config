// nextflow.config
// Global configuration for the DNA Processing Pipeline

nextflow.enable.dsl = 2

process {
    cpus = 1
    memory = '1 GB'
    time = '10m'
    errorStrategy = 'terminate'
    publishDir = "results", mode: 'copy'
}

docker {
    enabled = true
    runOptions = '-u $(id -u):$(id -g)'  // evita permisos root en outputs
}

profiles {

    // Ejecución local sin contenedores
    local {
        process.executor = 'local'
        docker.enabled = false
    }

    // Ejecución con contenedores públicos de Biocontainers
    docker {
        process.executor = 'local'
        docker.enabled = true
        process.container = 'biocontainers/biopython:1.79--pyhdfd78af_3'
    }

    // Ejecución distribuida (Kubernetes / SLURM)
    cluster {
        process.executor = 'k8s'
        docker.enabled = true
        process.container = 'biocontainers/biopython:1.79--pyhdfd78af_3'
    }
}

timeline {
    enabled = true
    file = "$baseDir/reports/timeline.html"
}

trace {
    enabled = true
    file = "$baseDir/reports/trace.txt"
}

report {
    enabled = true
    file = "$baseDir/reports/report.html"
}

workDir = "$baseDir/work"
